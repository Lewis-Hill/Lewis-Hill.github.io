<!DOCTYPE HTML>
<!--
	Solid State by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Rewind System</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Page Wrapper -->
			<div id="page-wrapper">

				<!-- Header -->
					<header id="header">
						<h1><a href="index.html">Lewis Hill</a></h1>
						<nav>
							<a href="#menu">Menu</a>
						</nav>
					</header>

				<!-- Menu -->
					<nav id="menu">
						<div class="inner">
							<h2>Menu</h2>
							<ul class="links">
								<li><a href="index.html">Home</a></li>
								<li><a href="rewind.html">Rewind System</a></li>
								<li><a href="multiplayer.html">Online Multiplayer demo</a></li>
								<li><a href="basketball.html">HORSE (Basketball Party Game)</a></li>
								<li><a href="roguelike.html">Procedural Roguelike</a></li>
								<li><a href="gamejam.html">Climax Game Jam</a></li>
							</ul>
							<a href="#" class="close">Close</a>
						</div>
					</nav>

				<!-- Wrapper -->
					<section id="wrapper">
						<header id="Top">
								<div class="inner">
									<h2 class="align-center">Rewind System (C++ UE5) - 2024</h2>
									<p class="align-center">This is a Rewind System made for a prototype of a track-placing puzzle game I'm working on. It encourages retrying a level by rewinding back to the start. I designed this to be a mechanic that can easily be expanded and implemented to future objects that wish to make use of it.</p>
								</div>
							</header>
						<!-- Movement -->
						<div class="wrapper style3">
							<header id="Overview">
								<br>
								<div class="inner">
									<h2><u>Overview</u></h2>
								</div>
							</header>
							<div class="inner">
								<video class="image left" controls src="images/Rewind/RewindMechanic.mp4"></video>
								<h3 class="major">Game Time Interface</h3>
								<p>My goal for this mechanic was making it expandable and maintainable, so that it will be easy to add rewind funtionality to future features. I achieved this by creating the "IGameTimeInterface", which can be implemented to allow data to be recorded and then retrieved during rewind. Using an interface allowed me to add rewind functionality to systems that have nothing in common, such as Player Animations, placed Track Actors, and the TrainMovementComponent.'</p>

								<ul class="actions">
									<li>
										<button class="button">GameTimeInterface.h code</button>
										<div class="codecontent">
<pre>
</pre>
										</div>
									</li>
								</ul>

								<h3 class="major">Game Time Subsystem</h3>
								<p>I then created the UGameTimeSubsystem, which manages and tracks all the Interfaces by storing all the data and then giving it back during rewind. The systems that implement the Interface can then use the data accordingly. For example, the train uses the data to set its Transform, speed and MovementMode.</p>
								<p>As shown in the UI for the video above, there is a rolling window of 10 seconds where rewind can be used. The subsystem also ensures that any data captured outside of this range is removed, preventing the stored data from becoming too large.</p>

								<ul class="actions">
									<li>
										<button class="button">GameTimeSubsystem.h code</button>
										<div class="codecontent">
<pre>
</pre>
										</div>
									</li>
								</ul>

								<ul class="actions">
									<li>
										<button class="button">GameTimeSubsystem.cpp code</button>
										<div class="codecontent">
<pre>
</pre>
										</div>
									</li>
								</ul>

								<h3 class="major">FInstancedStructs</h3>
								<p>The systems that implement the Interface require different data, for example the Player's animations don't need to store a Transform, but the TrainMovementComponent does. For this I made use of Unreal's FInstancedStructs to abstract the data type when recording data for the Interface, so they all take the same type of FInstancedStruct. Once retrieved, the system can access the base struct from this, such as FTrainGameTimeData for the TrainMovementComponent.'</p>

								<ul class="actions">
									<li>
										<button class="button">TrainMovementComponent retrieving data</button>
										<div class="codecontent">
<pre>void UTrainMovementComponent::RetrieveData(const FInstancedStruct& DataToRetrieve)
{
	if (const FTrainGameTimeData* GameTimeData = DataToRetrieve.GetPtr<FTrainGameTimeData>())
	{
		if (AActor* Owner = GetOwner())
		{
			Owner->SetActorLocationAndRotation(GameTimeData->TrainLocation, GameTimeData->TrainRotation);
			SetDistanceAlongAttachedTrack(GameTimeData->DistanceAlongAttachedTrack);

			m_CurrentSpeed = GameTimeData->CurrentSpeed;
			m_CurrentMovementMode = GameTimeData->MovementMode;
			m_VelocityToSetOnRewindEnd = GameTimeData->Velocity;
		}
	}
}</pre>
										</div>
									</li>
								</ul>

								<ul class="actions">
									<li><a href="#Top" class="button primary">Jump to top</a></li>
								</ul>

							</div>
						</div>
					</section>

				<!-- Footer -->
					<section class="wrapper style3">
						<div class="inner">
						<ul class="contact">
							<li class="icon solid fa-envelope"><a href="mailto: lewishill81@gmail.com" target="_blank">lewishill81@gmail.com</a></li>
							<li class="icon brands fa-linkedin"><a href="https://www.linkedin.com/in/lewis-hill-200425195/" target="_blank">Linkedin</a></li>
						</ul>
						</div>
					</section>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>